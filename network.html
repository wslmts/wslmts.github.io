<html>
  <head>
    <link type="text/css" rel="stylesheet" href="./css/main.css"/> 
    <style>
      table{
          border-collapse: collapse;
      }
    </style>
    <script src="vue.js"></script>
  </head>
  <body>
    <div id="app">                 
    <table border="1">
        <tr>
            <th>类型</th><th>用途</th>
        </tr>
        <tr>
            <td>A</td>
            <td>IP 地址是保存在 A 记录中,注册了A类型的记录，都可以作为服务器的域名来使用</td>
        </tr>
        <tr>
            <td>MX</td>
            <td>邮件服务器则是保存在 MX 记录中,当记录类型 为 MX 时，DNS 服务器会在记录中保存两种信息，分别是邮件服务器的域 名和优先级 </td>
        </tr>
        <tr>
            <td>PTR</td>
            <td>根据 IP 地址反查域名</td>
        </tr>
        <tr>
            <td>CNAME</td>
            <td>查询域名相关别名</td>
        </tr>
        <tr>
            <td>NS</td>
            <td>查询 DNS 服务器 IP 地址</td>
        </tr>
        <tr>
            <td>SOA</td>
            <td>查询域名属性信息</td>
        </tr>
    </table>
    <ol>
        <li>
            <pre>
                互联网中有数万台 DNS 服务器，采用下面的办法管理。
                首先，将负责管理下级域的 DNS 服务器的 IP 地址注 册到它们的上级 DNS 服务器中，
                然后上级 DNS 服务器的 IP 地址再注册到 更上一级的 DNS 服务器中，以此类推。
                也就是说，负责管理 lab.glasscom.com 这个域的 DNS 服务器的 IP 地址需要注册到 glasscom.com 域的 DNS 服务器中，
                而 glasscom.com 域的 DNS 服务器的 IP 地址又需要注册到 com 域的 DNS 服务器中。
                这样，我们就可以通过上级 DNS 服务器查询出下级 DNS 服务器的 IP 地址，也就可以向下级 DNS 服务器发送查询请求了。
                似乎 com、jp 这些域(称为顶级域)就是最顶层了， 它们各自负责保存下级 DNS 服务器的信息，但实际上并非如此。
                在互联网 中，com 和 jp 的上面还有一级域，称为根域。根域不像 com、jp 那样有自 己的名字，因此在一般书写域名时经常被省略，
                如果要明确表示根域，应 该像 www.lab.glasscom.com. 这样在域名的最后再加上一个句点，而这个最 后的句点就代表根域。
                不过，一般都不写最后那个句点，因此根域的存在 往往被忽略，但根域毕竟是真实存在的，根域的 DNS 服务器中保管着 com、jp 等的 DNS 服务器的信息。
            </pre>
        </li>
        <li>
            <pre>
                将根域的 DNS 服务器信息保 存在互联网中所有的 DNS 服务器中,这样一来，任何 DNS 服务器就都可 以找到并访问根域 DNS 服务器了。
                因此，客户端只要能够找到任意一台 DNS 服务器，就可以通过它找到根域 DNS 服务器，然后再一路顺藤摸瓜 找到位于下层的某台目标 DNS 服务器。
                分配给根域 DNS 服务器 的 IP 地址在全世界仅有 13 个，而且这些地址几乎不发生变化，因此将这 些地址保存在所有的 DNS 服务器中也并不是一件难事。
                实际上，根域 DNS 服务器的相关信息已经包含在 DNS 服务器程序的配置文件中了，因 此只要安装了 DNS 服务器程序，这些信息也就被自动配置好了。
            </pre>
        </li>
        <li>
            <pre>
                服务器上所使用的端口号是根据应用的种类事先规定好的，只要指定了事先规定好的端口号，就可以连接到相应的服务器 程序的套接字。
                也就是说，浏览器访问 Web 服务器时使用 80 号端口，这 是已经规定好的。
                客户端在创建套接字时，协议栈会为这个套接 字随便分配一个端口号 A。接下来，当协议栈执行连接操作时，会将这个随 便分配的端口号通知给服务器
            </pre>
        </li>
        <li>
            <pre>
                路由器和集线器两种不同的转发设备，它们在传输网络包时有 着各自的分工。
                (1)路由器根据目标地址判断下一个路由器的位置 (2)集线器在子网中将网络包传输到下一个路由
                实际上，集线器是按照以太网规则传输包的设备，而路由器是按照 IP 规则传输包的设备，因此我们也可以作如下理解。
                (1)IP 协议根据目标地址判断下一个 IP 转发设备的位置 (2)子网中的以太网协议将包传输到下一个转发设备
                TCP/IP 包包含如下两个头部,
                (a)MAC 头部(用于以太网协议) (b)IP 头部(用于 IP 协议)
                这两个头部分别具有不同的作用。首先，发送方将包的目的地，也就 是要访问的服务器的 IP 地址写入 IP 头部中。
                这样一来，我们就知道这个 包应该发往哪里，IP 协议就可以根据这一地址查找包的传输方向，从而找 到下一个路由器的位置，也就是图 2.16 中的路由器 R1。
                接下来，IP 协议 会委托以太网协议将包传输过去。这时，IP 协议会查找下一个路由器的以 太网地址(MAC 地址)，并将这个地址写入 MAC 头部中。
                这样一来，以太 网协议就知道要将这个包发到哪一个路由器上了。  
            </pre>
        </li>
        <li>
            <pre>
                网络包在传输过程中会经过集线器，集线器是根据以太 网协议工作的设备。
                为了判断包接下来应该向什么地方传输，集线器里有 一张表(用于以太网协议的表)，可根据以太网头部中记录的目的地信息查 出相应的传输方向。
                这张图中只有一个集线器，当存在多个集线器时，网 络包会按顺序逐一通过这些集线器进行传输。
                接下来，包会到达下一个路由器。路由器中有一张 IP 协 议的表，可根据这张表以及 IP 头部中记录的目的地信息查出接下来应该发 往哪个路由器。
                为了将包发到下一个路由器，我们还需要查出下一个路由 器的 MAC 地址，并记录到 MAC 头部中，大家可以理解为改写了 MAC 头 部。
                这样，网络包就又被发往下一个节点了。
            </pre>
        </li>
        <li>
            <pre>
                包收发操作的起点是 TCP 模块委托 IP 模块发送包的操作。这个委托的过程就是 TCP 模块在数据块的前面加上 TCP 头部，
                然后整个传递给 IP 模块，这部分就是网络包的内容。与此同时， TCP 模块还需要指定通信对象的 IP 地址，也就是需要写清楚“将什么内 容发给谁”。
                收到委托后，IP 模块会将包的内容当作一整块数据，在前面加上包含 控制信息的头部。刚才我们讲过，IP 模块会添加 IP 头部和 MAC 头部这两 种头部。
                IP 头部中包含 IP 协议规定的、根据 IP 地址将包发往目的地所需 的控制信息;MAC 头部包含通过以太网的局域网将包传输至最近的路由器所需的控制信息;
                IP 模块负责添加如下两个头部。
                (1) MAC 头部:以太网用的头部，包含 MAC 地址 (2) IP 头部:IP 用的头部，包含 IP 地址;
                接下来，封装好的包会被交给网络硬件，例 如以太网、无线局域网等。不 同形态的硬件名字也不一样，本书将它们统称为网卡。
                传递给网卡的网络 包是由一连串 0 和 1 组成的数字信息，网卡会将这些数字信息转换为电信 号或光信号，并通过网线(或光纤)发送出去，
                然后这些信号就会到达集线 器、路由器等转发设备，再由转发设备一步一步地送达接收方。

                在这个过程中，有几个关键的点。TCP 模块在收发数据时会分为好几 个阶段，并为各个阶段设计了实现相应功能的网络包，
                但 IP 的包收发操作 都是相同的，并不会因包本身而有所区别。因为 IP 模块会将 TCP 头部和 数据块看作一整块二进制数据，
                在执行收发操作时并不关心其中的内容， 也不关心这个包是包含 TCP 头部和数据两者都有呢，还是只有 TCP 头部 而没有数据。
                当然，IP 模块也不关心 TCP 的操作阶段，对于包的乱序和丢 失也一概不知。总之，IP 的职责就是将委托的东西打包送到对方手里，
                或 者是将对方送来的包接收下来，仅此而已。因此，接下来我们要讲的这些 关于 IP 的工作方式，可适用于任何 TCP 委派的收发操作;
            </pre>
        </li>
    </ol>
    <ul>
        <li v-for="i of 2"><img :src="getImg('net',i)"/></li>
    </ul>
    </div>
    <script>
            new Vue({
                el:"#app",      
                methods:{
                    getImg(name,i){
                        return "img/"+name+i+".jpg"
                    }
                }
            })
           </script>
  </body>
</html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="./css/main.css"/> 
     </head>
    <body>
        <div id="app">         
          <h3>shell编程</h3>
          我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：$n。n 代表一个数字， $0 为执行的文件名;
          1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……
          <pre>
            参数处理	说明
            $#	      传递到脚本的参数个数
            $*        以一个单字符串显示所有向脚本传递的参数。 如"$*"用「"」括起来的情况、以"$1 $2 … $n"的形式输出所有参数。
            $$	      脚本运行的当前进程ID号
            $!	      后台运行的最后一个进程的ID号
            $@	      与$*相同，但是使用时加引号，并在引号中返回每个参数。如"$@"用「"」括起来的情况、以"$1" "$2" … "$n" 的形式输出所有参数。
            $-	      显示Shell使用的当前选项，与set命令功能相同。
            $?	      显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。            
            <p>
            $* 与 $@ 区别：
            相同点：都是引用所有参数。
            不同点：只有在双引号中体现出来。
            假设在脚本运行时写了三个参数 1、2、3，，则 " * " 等价于 "1 2 3"（传递了一个参数），而 "@" 等价于 "1" "2" "3"（传递了三个参数）。
            </p>              
          </pre>
         <ol>
             <li>
                 <h5>基本运算符</h5>
                 <ol>
                    <li>
                            原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。
                            expr 是一款表达式计算工具，使用它能完成表达式的求值操作。
                    </li>
                    <li>
                            表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。
                    </li>
                    <li>完整的表达式要被 ` ` 包含</li>
                    <li>乘号(*)前边必须加反斜杠(\)才能实现乘法运算；</li>
                    <li>在 MAC 中 shell 的 expr 语法是：$((表达式))，此处表达式中的 "*" 不需要转义符号 "\" 。</li>
                 </ol>
                 <pre>
                        下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：

                        运算符	说明	举例
                        +	加法	`expr $a + $b` 结果为 30。
                        -	减法	`expr $a - $b` 结果为 -10。
                        *	乘法	`expr $a \* $b` 结果为  200。
                        /	除法	`expr $b / $a` 结果为 2。
                        %	取余	`expr $b % $a` 结果为 0。
                        =	赋值	a=$b 将把变量 b 的值赋给 a。
                        ==	相等。用于比较两个数字，相同则返回 true。	[ $a == $b ] 返回 false。
                        !=	不相等。用于比较两个数字，不相同则返回 true。	[ $a != $b ] 返回 true。
                        注意：条件表达式要放在方括号之间，并且要有空格，例如: [$a==$b] 是错误的，必须写成 [ $a == $b ]。
                 </pre>
             </li>
             <li>
                 <h5>关系运算符</h5>
                 <pre>
                        关系运算符只支持数字，不支持字符串，除非字符串的值是数字。

                        下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：
                        
                        运算符	说明	举例
                        -eq	检测两个数是否相等，相等返回 true。	[ $a -eq $b ] 返回 false。
                        -ne	检测两个数是否不相等，不相等返回 true。	[ $a -ne $b ] 返回 true。
                        -gt	检测左边的数是否大于右边的，如果是，则返回 true。	[ $a -gt $b ] 返回 false。
                        -lt	检测左边的数是否小于右边的，如果是，则返回 true。	[ $a -lt $b ] 返回 true。
                        -ge	检测左边的数是否大于等于右边的，如果是，则返回 true。	[ $a -ge $b ] 返回 false。
                        -le	检测左边的数是否小于等于右边的，如果是，则返回 true。	[ $a -le $b ] 返回 true。
                 </pre>
             </li>
             <li>
                 <h5>布尔运算符</h5>
                 <pre>
                        下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：

                        运算符	说明	举例
                        !	非运算，表达式为 true 则返回 false，否则返回 true。	[ ! false ] 返回 true。
                        -o	或运算，有一个表达式为 true 则返回 true。	[ $a -lt 20 -o $b -gt 100 ] 返回 true。
                        -a	与运算，两个表达式都为 true 才返回 true。	[ $a -lt 20 -a $b -gt 100 ] 返回 false。
                 </pre>
             </li>
             <li>
                <h5>逻辑运算符</h5>
                <pre>
                        以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:

                        运算符	说明	举例
                        &&	逻辑的 AND	[[ $a -lt 100 && $b -gt 100 ]] 返回 false
                        ||	逻辑的 OR	[[ $a -lt 100 || $b -gt 100 ]] 返回 true    
                </pre>
            </li>
            <li>
                <h5>字符串运算符</h5>
                <pre>
                        下表列出了常用的字符串运算符，假定变量 a 为 "abc"，变量 b 为 "efg"：

                        运算符	说明	举例
                        =	检测两个字符串是否相等，相等返回 true。	[ $a = $b ] 返回 false。
                        !=	检测两个字符串是否相等，不相等返回 true。	[ $a != $b ] 返回 true。
                        -z	检测字符串长度是否为0，为0返回 true。	[ -z $a ] 返回 false。
                        -n	检测字符串长度是否为0，不为0返回 true。	[ -n "$a" ] 返回 true。
                        str	检测字符串是否为空，不为空返回 true。	[ $a ] 返回 true。   
                </pre>
            </li>
            <li>
                <h5>文件测试运算符</h5>
                <pre>
                        文件测试运算符用于检测 Unix 文件的各种属性。

                        属性检测描述如下：
                        
                        操作符	 说明	                                   举例
                        -b file	检测文件是否是块设备文件，如果是，则返回 true。	[ -b $file ] 返回 false。
                        -c file	检测文件是否是字符设备文件，如果是，则返回 true。	[ -c $file ] 返回 false。
                        -d file	检测文件是否是目录，如果是，则返回 true。	[ -d $file ] 返回 false。
                        -f file	检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。	[ -f $file ] 返回 true。
                        -g file	检测文件是否设置了 SGID 位，如果是，则返回 true。	[ -g $file ] 返回 false。
                        -k file	检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。	[ -k $file ] 返回 false。
                        -p file	检测文件是否是有名管道，如果是，则返回 true。	[ -p $file ] 返回 false。
                        -u file	检测文件是否设置了 SUID 位，如果是，则返回 true。	[ -u $file ] 返回 false。
                        -r file	检测文件是否可读，如果是，则返回 true。	[ -r $file ] 返回 true。
                        -w file	检测文件是否可写，如果是，则返回 true。	[ -w $file ] 返回 true。
                        -x file	检测文件是否可执行，如果是，则返回 true。	[ -x $file ] 返回 true。
                        -s file	检测文件是否为空（文件大小是否大于0），不为空返回 true。	[ -s $file ] 返回 true。
                        -e file	检测文件（包括目录）是否存在，如果是，则返回 true。	[ -e $file ] 返回 true。  
                </pre>
            </li>
            <li>
                <h5>echo</h5>
                <pre>
                        echo(选项)(参数)
                        -e：激活转义字符
                        用echo命令打印带有色彩的文字：

                        文字色：

                        echo -e "\e[1;31mThis is red text\e[0m"
                        This is red text
                        \e[1;31m 将颜色设置为红色
                        \e[0m 将颜色重新置回
                        颜色码：重置=0，黑色=30，红色=31，绿色=32，黄色=33，蓝色=34，洋红=35，青色=36，白色=37

                        背景色：

                        echo -e "\e[1;42mGreed Background\e[0m"
                        Greed Background
                        颜色码：重置=0，黑色=40，红色=41，绿色=42，黄色=43，蓝色=44，洋红=45，青色=46，白色=47

                        文字闪动：

                        echo -e "\033[37;31;5mMySQL Server Stop...\033[39;49;0m"
                        红色数字处还有其他数字参数：0 关闭所有属性、1 设置高亮度（加粗）、4 下划线、5 闪烁、7 反显、8 消隐 
                </pre>
            </li>
            <li>
                <h5>printf</h5>
                <pre>
                        printf  format-string  [arguments...]
                        printf "%-10s %-8s %-4s\n" 姓名 性别 体重kg  
                        %-10s 指一个宽度为10个字符（-表示左对齐，没有则表示右对齐），任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。
 
 %d %s %c %f 格式替代符详解:
 
 d: Decimal 十进制整数 -- 对应位置参数必须是十进制整数，否则报错！
 
 s: String 字符串 -- 对应位置参数必须是字符串或者字符型，否则报错！
 
 c: Char 字符 -- 对应位置参数必须是字符串或者字符型，否则报错！
 
 f: Float 浮点 -- 对应位置参数必须是数字型，否则报错！
                        printf的转义序列
序列	说明
\a	警告字符，通常为ASCII的BEL字符
\b	后退
\c	抑制（不显示）输出结果中任何结尾的换行字符（只在%b格式指示符控制下的参数字符串中有效），而且，任何留在参数里的字符、任何接下来的参数以及任何留在格式字符串中的字符，都被忽略
\f	换页（formfeed）
\n	换行
\r	回车（Carriage return）
\t	水平制表符
\v	垂直制表符
\\	一个字面上的反斜杠字符
\ddd	表示1到3位数八进制值的字符。仅在格式字符串中有效
\0ddd	表示1到3位的八进制值字符
                </pre>
            </li>
            <li>
                <h5>function</h5>
                <pre>
                    [ function ] funname [()]

                    {
                    
                        action;
                    
                        [return int;]
                    
                    }
                    1、可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。
                    2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255
                    3、函数返回值在调用该函数后通过 $? 来获得。
                       注意：所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可。
                    4、在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值;
                       注意，$10 不能获取第十个参数，获取第十个参数需要${10}。当n>=10时，需要使用${n}来获取参数。
                </pre>
            </li>
            <li>
                <h5>输入/输出重定向</h5>
                <pre>
                    命令	说明
                    command > file	将输出重定向到 file。
                    command < file	将输入重定向到 file。
                    command >> file	将输出以追加的方式重定向到 file。
                    n > file	将文件描述符为 n 的文件重定向到 file。
                    n >> file	将文件描述符为 n 的文件以追加的方式重定向到 file。
                    n >& m	将输出文件 m 和 n 合并。
                    n <& m	将输入文件 m 和 n 合并。
                    << tag	将开始标记 tag 和结束标记 tag 之间的内容作为输入。
                    需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）

                
                    如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：

                    $ command > file 2>&1

                    或者

                    $ command >> file 2>&1
                    如果希望对 stdin 和 stdout 都重定向，可以这样写：

                    $ command < file1 >file2

                </pre>
                <h5>Here Document</h5>
                <pre>                       
                    Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。                 
                    它的基本的形式如下：                       
                    command << delimiter
                        document
                    delimiter

                    它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。

                    注意：

                    结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。
                    开始的delimiter前后的空格会被忽略掉。
                </pre>
                <H5>/dev/null 文件</H5>
                <PRE>
                如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：

                $ command > /dev/null
                /dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到"禁止输出"的效果。
                
                如果希望屏蔽 stdout 和 stderr，可以这样写：
                
                $ command > /dev/null 2>&1
                </PRE>
            </li>
         </ol>
          <footer class="ps">ps:内容来自互联网</footer>
        </div>
       
    </body>
</html>
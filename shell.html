<html>
    <head>
        <link type="text/css" rel="stylesheet" href="./css/main.css"/> 
     </head>
    <body>
        <div id="app">         
          <h3>shell编程</h3>
          <ol>
            <li>#! 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序。（#!/bin/bash）</li>
            <li>
                <h5>运行 Shell 脚本有两种方法</h5>
                <ol>
                    <li>作为可执行程序
                        <pre>chmod +x ./test.sh  #使脚本具有执行权限
                             ./test.sh  #执行脚本
                             注意，一定要写成 ./test.sh，而不是 test.sh，运行其它二进制的程序也一样，直接写 test.sh，linux 系统会去 PATH 里寻找有没有叫 test.sh 的，
                             而只有 /bin, /sbin, /usr/bin，/usr/sbin 等在 PATH 里，
                             你的当前目录通常不在 PATH 里，所以写成 test.sh 是会找不到命令的，要用 ./test.sh 告诉系统说，就在当前目录找。    
                        </pre>
                    </li>
                    <li>作为解释器参数
                        <pre>
                                这种运行方式是，直接运行解释器，其参数就是 shell 脚本的文件名，如：
                                /bin/sh test.sh
                                这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。
                        </pre>
                    </li>
                </ol>
            </li> 
            <li><h5>命令区别</h5>
                <pre>
                    1. source命令用法：

                    source FileName
                    作用:在当前 bash 环境下读取并执行 FileName 中的命令。该 filename 文件可以无 "执行权限"。
                    
                    注：该命令通常用命令 . 来替代。
                    
                    2. sh、bash的命令用法：
                    
                    sh FileName
                    或
                    bash FileName
                    作用:打开一个子 shell 来读取并执行 FileName 中命令。该 filename 文件可以无 "执行权限"。
                    
                    注：运行一个shell脚本时会启动另一个命令解释器。
                    
                    3、./的命令用法：
                    
                    ./FileName
                    作用: 打开一个子 shell 来读取并执行 FileName 中命令，该 filename 文件需要 "执行权限"。
                    
                    注：运行一个 shell 脚本时会启动另一个命令解释器。
                    4、fork、source、exec
• 使用fork方式运行script时， 就是让shell(parent process)产生一个child process去执行 该script，当child process结束后，会返回parent process，但parent process的环境是 不会因child process的改变而改变的。
• 使用source方式运行script时， 就是让script在当前process内执行， 而不是产生一个 child process来执行。由于所有执行结果均于当前process内完成，若script的环境有所改 变， 当然也会改变当前process环境了。
• 使用exec方式运行script时， 它和source一样，也是让script在当前process内执行，但是 process内的原代码剩下部分将被终止。同样，process内的环境随script改变而改变。
通常如果我们执行时，都是默认为fork的。
                </pre>
            </li>
            <li><h5>变量使用</h5>
                <ol>
                    <li>定义变量时，变量名不加美元符号;变量名和等号之间不能有空格</li>
                    <li>使用一个定义过的变量，只要在变量名前面加美元符号即可</li>
                    <li>变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界</li>
                    <li>
                        <pre>
                            使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。
                            #!/bin/bash
                            myUrl="http://www.google.com"
                            readonly myUrl (or 一次性操作 readonly myUrl="http://www.google.com")
                            myUrl="http://www.runoob.com"
                            
                        </pre>
                    </li>             
                </ol>
            </li>
            <li><h5>删除变量</h5>
                    <pre>
                    使用 unset 命令可以删除变量。语法：
                    unset variable_name
                    
                    unset 命令不能删除只读变量
                    </pre>
                </li>
            <li>
                <h5>变量类型</h5>
                <pre>
                运行shell时，会同时存在三种变量：

                1) 局部变量 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。
                2) 环境变量 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。
                3) shell变量 shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行  
                </pre>
            </li>
            <li>
                <h5>字符串</h5>
                <ol>
                    <li>
                    <pre>
                            单引号字符串的限制：
    
                            单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；
                            单引号字串中不能出现单引号（对单引号使用转义符后也不行）。
                    </pre>
                    </li>
                    <li>
                        <pre>
                                双引号里可以有变量
                                双引号里可以出现转义字符
                        </pre>
                    </li>                  
                </ol>              
            </li>
            <li><h5>字符串操作</h5>
                <ol>                
                    <li><h5>获取字符串长度(#string)</h5>
                        string="abcd"
                     echo ${#string} #输出 4
                    </li>
                    <li><h5>提取子字符串(string:开始位置：长度)</h5>
                        string="great"
                        echo ${string:1:2} # 输出 re
                    </li>
                </ol>
            </li>
            <li><h5>Shell 数组</h5>
                <ol>                
                    <li><h5>定义数组</h5>
                    <pre>
                        在 Shell 中，用括号来表示数组，数组元素用"空格"符号分割开。定义数组的一般形式为：
                        数组名=(值1 值2 ... 值n)
                        还可以单独定义数组的各个分量：
                            array_name[0]=value0
                            array_name[1]=value1
                            array_name[n]=valuen
                        可以不使用连续的下标，而且下标的范围没有限制。
                    </pre>
                    </li>
                    <li><h5>提取数组 ${数组名[下标]}</h5>
                        <pre>
                        ${数组名[下标]}
                        使用 @ 符号可以获取数组中的所有元素，例如：
                        echo ${array_name[@]}
                        # 取得数组元素的个数
                        length=${#array_name[@]}
                        # 或者
                        length=${#array_name[*]}
                        # 取得数组单个元素的长度
                        lengthn=${#array_name[n]}
                        </pre>                       
                    </li>                
                </ol>
            </li>
            <li>
                    <h5>多行注释</h5>
                    <pre>
                            :&lt;&lt;EOF
                            注释内容...
                            注释内容...
                            注释内容...
                            EOF

                            EOF 也可以使用其他符号:
                            
                            :&lt;&lt;'
                            注释内容...
                            注释内容...
                            注释内容...
                            '
                            
                            :&lt;&lt;!
                            注释内容...
                            注释内容...
                            注释内容...
                            !
                    </pre>
                </li>
                <li>
                    <a href="shell-arg.html">shell参数</a>
                </li>
          </ol>    
          <footer class="ps">ps:内容来自互联网</footer>
        </div>
       
    </body>
</html>